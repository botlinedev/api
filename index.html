<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>MENU | เมนู</title>
    <link href="style.css" rel="stylesheet" type="text/css"/>
	<style>
		#imgur {
	margin-bottom: 50px;
		}
		.imgur {
  color: transparent;
    background: url(https://i.imgur.com/ZAOasOH.jpg);
    position: absolute;
    padding-top: 16px!important;
    padding-bottom: 16px!important;
    padding: 0.01em 16px;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    border-radius: 5px;
}
.imgur::-webkit-file-upload-button {
  visibility: hidden;
}
.imgur:active {
  outline: 0;
}
.imgur:active::before {
  background: -webkit-linear-gradient(top, #e3e3e3, #f9f9f9); 
}
	  </style>
  </head>
  <body>
    <console>
      <p>This is your console.</p>
    </console>
    <div class="card">
      <div class="container">
        <img  class="profile" src="https://i.imgur.com/ObBOmmq.png?v=1">
        <div class="wrap-input validate-input" data-validate="Valid Text Message" id="textInput">
		<textarea class="area" id="text" type="text" name="text" placeholder="ข้อความ"></textarea>
        </div>

        <div class="wrap-input validate-input" data-validate="Valid url is required: https://" id="imageInput">
		<form id="imgur">
		  <img id="imgururl" style="width:100%">
		  <input type="file" class="imgur" accept="image/*" data-max-size="5000"/>
		</form>
		<input class="input" id="image" type="text" name="image" placeholder="ลิ้งรูป">
        </div>
        <div class="wrap-input validate-input" data-validate="Valid url is required: https://" id="urlInput">
		<input class="input" id="url" type="text" name="url" placeholder="ลิ้งเว็บ">
        </div>
        
        <div class="wrap-input validate-input" data-validate="Valid url is required: https://" id="VideoInput">
		<input class="input" id="video" type="text" name="Video" placeholder="ลิ้งวิดีโอ">
        </div>
        <div class="wrap-input validate-input" data-validate="Valid url is required: https://" id="imageVideoInput">
		<input class="input" id="imageVideo" type="text" name="imageVideo" placeholder="ลิ้งรูปของวิดีโอ">
        </div>

        <div class="wrap-input validate-input" data-validate="Valid url is required: https://" id="groupInput">
		<input class="input" id="group" type="text" name="group" placeholder="ลิ้งกลุ่ม">
        </div>

        <div class="btn">
          <ul id="menu">
            <li class="template">
              <a href="javascript:;" onclick="btnText()">
                <div class="thumbnail_wrapper">
                  <img src="https://wj.qq.com/data_temp/template_source/img/chat.png?v=1" class="thumbnail">
                </div>
                <div class="template_title">ข้อความ</div>
              </a>
            </li>
            <li class="template">
              <a href="javascript:;" onclick="btnImage()">
                <div class="thumbnail_wrapper">
                  <img src="https://wj.qq.com/data_temp/template_source/img/game.png?v=1" class="thumbnail">
                </div>
                <div class="template_title">รูปภาพ</div>
              </a>
            </li>
            <li class="template">
              <a href="javascript:;" onclick="btnVideo()">
                <div class="thumbnail_wrapper">
                  <img src="https://wj.qq.com/data_temp/template_source/img/tv.png?v=1"class="thumbnail">
                </div>
                <div class="template_title" >วิดีโอ</div>
              </a>
            </li>
            <li class="template">
              <a href="javascript:;" onclick="btnGroup()">
                <div class="thumbnail_wrapper">
                  <img src="https://wj.qq.com/data_temp/template_source/img/coffee.png?v=1" class="thumbnail">
                </div>
                <div class="template_title">เพิ่มกลุ่ม</div>
              </a>
            </li>
          </ul>
          <button class="submit" id="btnSend">
            กดส่ง
          </button>
        </div>
      </div>
    </div>
    <script src='https://code.jquery.com/jquery-2.2.4.min.js?v=1'></script>
    <script src="https://d.line-scdn.net/liff/1.0/sdk.js?v=1"></script>
    <script src="script.js"></script>
    <script>
	$("document").ready(function() {

	  $('input[type=file]').on("change", function() {

	    var $files = $(this).get(0).files;

	    if ($files.length) {

	      if ($files[0].size > $(this).data("max-size") * 1040) {
		console.log("รูปภาพใหญ่เกินไป");
		return false;
	      }

	      console.log("กำลังอัพโหลดรูป");

	      var apiUrl = 'https://api.imgur.com/3/image';
	      var apiKey = '43905ab7492a794';

	      var settings = {
		async: false,
		crossDomain: true,
		processData: false,
		contentType: false,
		type: 'POST',
		url: apiUrl,
		headers: {
		  Authorization: 'Client-ID ' + apiKey,
		  Accept: 'application/json'
		},
		mimeType: 'multipart/form-data'
	      };

	      var formData = new FormData();
	      formData.append("image", $files[0]);
	      settings.data = formData;

	      $.ajax(settings).done(function(response) {
		console.log(response);
		$('#imgururl').attr('src', response.data.link);
		$('#image').val(response.data.link);
	      });

	    }
	  });
	});
    </script>
  </body>
</html>
